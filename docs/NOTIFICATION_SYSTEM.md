# ูุธุงู ุงูุฅุดุนุงุฑุงุช - Hessity LMS
## System Notifications Documentation

---

## ูุธุฑุฉ ุนุงูุฉ | Overview

This document describes all notification events in the Hessity LMS system, including:
- **What triggers each notification**
- **Who receives it (Audience)**
- **Which channel is used (WhatsApp, Push, In-App, SMS)**
- **Business justification for each decision**

### ุงููููุงุช ุงููุชุงุญุฉ | Available Channels

| Channel | Cost | Speed | Use Case |
|---------|------|-------|----------|
| **WhatsApp** | ๐ฐ๐ฐ๐ฐ High | Fast | Critical safety alerts only |
| **Push (FCM)** | ๐ฐ Free | Instant | Important real-time updates |
| **In-App** | ๐ฐ Free | On login | Audit trail & non-urgent info |
| **SMS** | ๐ฐ๐ฐ๐ฐ High | Fast | OTP & critical security only |
| **Email** | ๐ฐ Low | Slow | Verification & reports |

### ููุณูุฉ ุงูุชุตููู | Design Philosophy

> **"Lean Anti-Spam Approach"** - ูุฑุณู ุฅุดุนุงุฑุงุช ููุท ุนูุฏูุง ูููู ููุงู ูููุฉ ุญููููุฉ ูููุณุชุฎุฏู

1. **WhatsApp ูุญุฌูุฒ ููุทูุงุฑุฆ ููุท** - ูููุน ุญุธุฑ ุงูุฑูู ูู Meta ููุชูููู ุงูุชูููุฉ
2. **Push ููุฃุญุฏุงุซ ุงููููุฉ** - ูุฌุงูู ูุณุฑูุน
3. **In-App ููุฃุฑุดูุฉ** - ุงููุณุชุฎุฏู ูุดูููุง ููุง ูุฏุฎู ุงูุชุทุจูู

---

## 1. ุฅุดุนุงุฑุงุช ุงููุตุงุฏูุฉ ูุงูุฃูุงู | Auth & Security Notifications

### 1.1 OTP - ุฑูุฒ ุงูุชุญูู

| Property | Value |
|----------|-------|
| **Trigger** | ุทูุจ ุฑูุฒ ุชุญูู (ุชุณุฌูู/ุชุบููุฑ ุฑูู) |
| **Audience** | ุงููุณุชุฎุฏู ููุณู |
| **Channel** | ๐ฑ SMS |
| **Priority** | ๐ด Critical |
| **Business Justification** | ุถุฑูุฑู ููุชุญูู ูู ุงููููุฉ - ูุง ุจุฏูู ุนูู |

---

### 1.2 NEW_DEVICE_LOGIN - ุฏุฎูู ูู ุฌูุงุฒ ุฌุฏูุฏ

| Property | Value |
|----------|-------|
| **Trigger** | ุชุณุฌูู ุฏุฎูู ูู ุฌูุงุฒ ูู ููุณุชุฎุฏู ูู ูุจู |
| **Audience** | ุงููุณุชุฎุฏู ููุณู |
| **Channel** | ๐ Push + ๐ฒ In-App |
| **Priority** | ๐ก Medium |
| **Business Justification** | ุชูุจูู ุฃููู - ูุนุฑู ุงููุณุชุฎุฏู ุฅุฐุง ุญุฏ ุฏุฎู ุญุณุงุจู |

**ููุงุญุธุฉ:** ูุง ูุฑุณู ุฅุดุนุงุฑ ุฅุฐุง ูุงู ุงูุฌูุงุฒ ูุนุฑูู ูุณุจูุงู (Trust Period: 30 ููู)

---

### 1.3 PASSWORD_CHANGED - ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ

| Property | Value |
|----------|-------|
| **Trigger** | ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ |
| **Audience** | ุงููุณุชุฎุฏู ููุณู |
| **Channel** | ๐ Push + ๐ฒ In-App |
| **Priority** | ๐ก Medium |
| **Business Justification** | ุชุฃููุฏ ุงูุนูููุฉ - ูู ูุด ูู ุงููู ุบูุฑูุง ููุฏุฑ ูุชุตุฑู |

---

### 1.4 LOGIN_FAILED - ูุญุงููุฉ ุฏุฎูู ูุงุดูุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ูุดู ุชุณุฌูู ุงูุฏุฎูู (ูููุฉ ูุฑูุฑ ุฎุงุทุฆุฉ) |
| **Audience** | ุงููุณุชุฎุฏู ุตุงุญุจ ุงูุญุณุงุจ (ูู ููุฌูุฏ) |
| **Channel** | ๐ Push + ๐ฒ In-App |
| **Priority** | ๐ก Medium |
| **Rate Limit** | โฑ๏ธ ุฅุดุนุงุฑ ูุงุญุฏ ูู 15 ุฏูููุฉ (ูููุน Spam) |
| **Business Justification** | ุชุญุฐูุฑ ูู ูุญุงููุฉ ุงุฎุชุฑุงู ูุญุชููุฉ |

---

### 1.5 TWO_FA_DISABLED - ุฅููุงู ุงูุชุญูู ุจุฎุทูุชูู

| Property | Value |
|----------|-------|
| **Trigger** | ุฅููุงู ุงูุชุญูู ุจุฎุทูุชูู |
| **Audience** | ุงููุณุชุฎุฏู ููุณู |
| **Channel** | ๐ฑ SMS + ๐ Push |
| **Priority** | ๐ด Critical |
| **Business Justification** | ุชุญุฐูุฑ ุฃููู ุฎุทูุฑ - ูููู ูู ุฃูุงู ุงูุญุณุงุจ |

---

## 2. ุฅุดุนุงุฑุงุช ุงูุชุญูู ูู ุงููุตูู | Access Control Notifications

### 2.1 CENTER_ACCESS_GRANTED - ููุญ ูุตูู ูููุฑูุฒ (ุชูุธูู ุฌุฏูุฏ)

| Property | Value |
|----------|-------|
| **Trigger** | ุฅุถุงูุฉ ููุธู/ูุฏุฑุณ/ุทุงูุจ ุฌุฏูุฏ ูููุฑูุฒ |
| **Business Value** | ๐ **ูุฑุงุฑ ุชูุธูู** - ูุฌุจ ุฃู ูุดุนุฑ ุงูููุธู ุงูุฌุฏูุฏ ุจุงูุชุฑุญูุจ |

| Audience | Channel | Message Theme |
|----------|---------|---------------|
| **TARGET** (ุงูููุธู ุงูุฌุฏูุฏ) | ๐ฌ WhatsApp + ๐ Push + ๐ฒ In-App | "ุฃููุงู ุจู ูู ุงููุฑูู! ุชู ุชูุนูู ุตูุงุญูุงุชู" |
| **OWNERS** (ุฃุตุญุงุจ ุงููุฑูุฒ) | ๐ Push + ๐ฒ In-App | "ุชูุจูู ุฃููู: ุชู ููุญ ุตูุงุญูุฉ ุฌุฏูุฏุฉ" |

**ููุงุฐุง WhatsApp ููููุธู ุงูุฌุฏูุฏุ**
- ุฑุณุงูุฉ ุชุฑุญูุจูุฉ ุงุญุชุฑุงููุฉ ุชุนูุณ ุตูุฑุฉ ุงููุฑูุฒ
- ุงูููุธู ุงูุฌุฏูุฏ ูุฏ ูุง ูููู ูุชุญ ุงูุชุทุจูู ุจุนุฏ

---

### 2.2 CENTER_ACCESS_REVOKED - ุณุญุจ ุงููุตูู (ุฅููุงุก ุฎุฏูุฉ)

| Property | Value |
|----------|-------|
| **Trigger** | ุฅุฒุงูุฉ ููุธู ูู ุงููุฑูุฒ |
| **Business Value** | โ๏ธ **ูุฑุงุฑ ูุตู/ููู** - ูุฌุจ ุฅุนูุงู ุงูุทุฑููู |

| Audience | Channel | Message Theme |
|----------|---------|---------------|
| **TARGET** (ุงูููุธู) | ๐ฌ WhatsApp + ๐ Push | "ุชู ุชุนุฏูู ุตูุงุญูุงุชู - ุฑุงุฌุน ุงูุฅุฏุงุฑุฉ" |
| **OWNERS** (ุฃุตุญุงุจ ุงููุฑูุฒ) | ๐ Push + ๐ฒ In-App | "ุชูุจูู ุฃููู: ุชู ุฅูุบุงุก ุตูุงุญูุฉ" |

---

### 2.3 CENTER_ACCESS_ACTIVATED - ุชูุนูู ุงููุตูู

| Property | Value |
|----------|-------|
| **Trigger** | ุฅุนุงุฏุฉ ุชูุนูู ููุธู ูุงู ูููููุงู |

| Audience | Channel | Message Theme |
|----------|---------|---------------|
| **TARGET** | ๐ฌ WhatsApp + ๐ Push + ๐ฒ In-App | "ุฃููุงู ุจู ูุฌุฏุฏุงู! ุชู ุชูุนูู ูุตููู" |
| **OWNERS** | ๐ Push + ๐ฒ In-App | "ุชูุจูู: ุชู ุชูุนูู ูุตูู ูุณุชุฎุฏู" |

---

### 2.4 CENTER_ACCESS_DEACTIVATED - ุฅููุงู ุงููุตูู ูุคูุชุงู

| Property | Value |
|----------|-------|
| **Trigger** | ุฅููุงู ููุธู ูุคูุชุงู (ุฅุฌุงุฒุฉ/ุชุญููู) |

| Audience | Channel | Message Theme |
|----------|---------|---------------|
| **TARGET** | ๐ฌ WhatsApp + ๐ Push | "ุชู ุฅููุงู ูุตููู ูุคูุชุงู" |
| **OWNERS** | ๐ Push + ๐ฒ In-App | "ุชูุจูู ุฃููู: ุชู ุฅููุงู ูุตูู ูุณุชุฎุฏู" |

---

### 2.5 ROLE_ASSIGNED - ุชุนููู ุฏูุฑ

| Property | Value |
|----------|-------|
| **Trigger** | ุชุนููู ุฏูุฑ (ูุฏูุฑ/ูุญุงุณุจ/ุฅูุฎ) ูููุธู |

| Audience | Channel | Message Theme |
|----------|---------|---------------|
| **TARGET** | ๐ Push + ๐ฒ In-App | "ุชู ุชุนูููู ูู ุฏูุฑ [ุงูุฏูุฑ]" |
| **OWNERS** | ๐ Push + ๐ฒ In-App | "ุชู ุชุนููู ุฏูุฑ ุฌุฏูุฏ" |

---

### 2.6 ROLE_REVOKED - ุฅูุบุงุก ุฏูุฑ

| Property | Value |
|----------|-------|
| **Trigger** | ุฅุฒุงูุฉ ุฏูุฑ ูู ููุธู |

| Audience | Channel | Message Theme |
|----------|---------|---------------|
| **TARGET** | ๐ Push + ๐ฒ In-App | "ุชู ุฅูุบุงุก ุฏูุฑ [ุงูุฏูุฑ] ูู ุญุณุงุจู" |
| **OWNERS** | ๐ Push + ๐ฒ In-App | "ุชู ุฅูุบุงุก ุฏูุฑ" |

---

## 3. ุฅุดุนุงุฑุงุช ุงูุญุตุต | Session Notifications

### 3.1 SESSION_CREATED - ุฅูุดุงุก ุญุตุฉ ุฌุฏูุฏุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุฅุถุงูุฉ ุญุตุฉ ุฌุฏูุฏุฉ ูู ุงูุฌุฏูู |

| Audience | Channel | Justification |
|----------|---------|---------------|
| **STUDENTS** | ๐ Push + ๐ฒ In-App | ูุนุฑู ููุนุฏ ุญุตุชู |
| **PARENTS** | ๐ฒ In-App | ูููุชุงุจุนุฉ ููุท |
| **TEACHER** | ๐ Push + ๐ฒ In-App | ูุนุฑู ุฌุฏููู |
| **STAFF** | ๐ฒ In-App | ููุฃุฑุดูุฉ |

---

### 3.2 SESSION_UPDATED - ุชุนุฏูู ุงูุญุตุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุชุบููุฑ ููุนุฏ/ููุงู/ุชูุงุตูู ุงูุญุตุฉ |

| Audience | Channel | Justification |
|----------|---------|---------------|
| **STUDENTS** | ๐ฌ WhatsApp + ๐ Push | ุงูููุนุฏ ุงูุฌุฏูุฏ ููู ุฌุฏุงู |
| **PARENTS** | ๐ฌ WhatsApp | ุนุดุงู ููุตููุง ุฃููุงุฏูู ูู ุงูููุนุฏ ุงูุตุญ |
| **TEACHER** | ๐ Push + ๐ฒ In-App | ูุนุฑู ุงูุชุบููุฑ |
| **STAFF** | ๐ฒ In-App | ููุฃุฑุดูุฉ |

---

### 3.3 SESSION_CANCELED - ุฅูุบุงุก ุงูุญุตุฉ โ๏ธ CRITICAL

| Property | Value |
|----------|-------|
| **Trigger** | ุฅูุบุงุก ุญุตุฉ ูุฌุฏููุฉ |
| **Priority** | ๐ด **Critical - Safety Concern** |

| Audience | Channel | Justification |
|----------|---------|---------------|
| **STUDENTS** | ๐ฌ **WhatsApp** + ๐ Push | **ููุน ุงููุดูุงุฑ ุงููุงุถู ูููุฑูุฒ** |
| **PARENTS** | ๐ฌ **WhatsApp** + ๐ Push | **ุฃูุงู ุงูุฃุทูุงู - ููุณูุจุด ุงุจูู ูุฑูุญ ูููุงู ููููู** |
| **TEACHER** | ๐ฌ **WhatsApp** + ๐ Push | ุนุดุงู ููุฌูุด |
| **STAFF** | ๐ Push + ๐ฒ In-App | ููุนูู |

**โ๏ธ ูุฐุง ุงูุฅุดุนุงุฑ ุงููุญูุฏ ูู ุงูุญุตุต ุงูุฐู ูุณุชุฎุฏู WhatsApp - ูุฃุณุจุงุจ ุฃูุงู**

---

### 3.4 SESSION_FINISHED - ุงูุชูุงุก ุงูุญุตุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุงูุชูุงุก ุงูุญุตุฉ ูุชุณุฌูููุง |

| Audience | Channel | Justification |
|----------|---------|---------------|
| **STUDENTS** | ๐ฒ In-App | ููุชูุซูู |
| **PARENTS** | ๐ **Push** | **ุชูุจูู ููุงุณุชูุงู - ุงุจูู ุฎูุต** |
| **TEACHER** | ๐ฒ In-App | ููุชูุซูู |
| **STAFF** | ๐ฒ In-App | ููุฃุฑุดูุฉ |

---

### 3.5 SESSION_DELETED - ุญุฐู ุงูุญุตุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุญุฐู ุญุตุฉ ูู ุงููุธุงู |

| Audience | Channel |
|----------|---------|
| **STUDENTS** | ๐ Push + ๐ฒ In-App |
| **PARENTS** | ๐ Push + ๐ฒ In-App |
| **TEACHER** | ๐ Push + ๐ฒ In-App |
| **STAFF** | ๐ฒ In-App |

---

### 3.6 SESSION_CHECKED_IN - ุจุฏุก ุงูุญุตุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุงููุฏุฑุณ ูุจุฏุฃ ุงูุญุตุฉ (check-in) |

| Audience | Channel | Justification |
|----------|---------|---------------|
| **STUDENTS** | ๐ Push + ๐ฒ In-App | ุงูุญุตุฉ ุจุฏุฃุช |
| **PARENTS** | ๐ Push + ๐ฒ In-App | ุชุฃููุฏ ูุตูู ุงูุทูู |
| **STAFF** | ๐ฒ In-App | ูููุชุงุจุนุฉ |

---

### 3.7 SESSION_CONFLICT_DETECTED - ุชุนุงุฑุถ ูู ุงูุฌุฏูู

| Property | Value |
|----------|-------|
| **Trigger** | ุงูุชุดุงู ุชุนุงุฑุถ ูู ููุงุนูุฏ ุงูุญุตุต |

| Audience | Channel |
|----------|---------|
| **TEACHER** | ๐ Push + ๐ฒ In-App |
| **STAFF** | ๐ Push + ๐ฒ In-App |

**ููุงุญุธุฉ:** ูุฐุง ุฅุดุนุงุฑ ุฅุฏุงุฑู ููุท - ุงูุทูุงุจ ูุฃูููุงุก ุงูุฃููุฑ ูุง ูุญุชุงุฌููู

---

## 4. ุฅุดุนุงุฑุงุช ุงูููุงุณุงุช | Class Notifications

### 4.1 CLASS_CREATED - ุฅูุดุงุก ููุงุณ

| Property | Value |
|----------|-------|
| **Trigger** | ุฅูุดุงุก ููุงุณ ุฌุฏูุฏ |
| **Priority** | ๐ข Low (Informational) |

| Audience | Channel | Justification |
|----------|---------|---------------|
| **TEACHER** | ๐ฒ In-App | ุงูููุดุฆ ูุนุฑู - ููุฃุฑุดูุฉ ููุท |
| **STAFF** | ๐ฒ In-App | ููุฃุฑุดูุฉ |

**ููุงุฐุง In-App ููุทุ** ุงูููุดุฆ ูุนุฑู ุฃูู ุฃูุดุฃ ุงูููุงุณ - ูุง ุญุงุฌุฉ ูุฅุฒุนุงุฌู

---

### 4.2 CLASS_UPDATED - ุชุญุฏูุซ ุงูููุงุณ

| Property | Value |
|----------|-------|
| **Trigger** | ุชุบููุฑ ุจูุงูุงุช ุงูููุงุณ |
| **Priority** | ๐ข Low |

| Audience | Channel |
|----------|---------|
| **TEACHER** | ๐ฒ In-App |
| **STAFF** | ๐ฒ In-App |
| **STUDENTS** | ๐ฒ In-App |
| **PARENTS** | ๐ฒ In-App |

**ููุงุฐุง In-App ููุทุ** ุชุบููุฑุงุช ุงูุจูุงูุงุช ุงูุนุงูุฉ ููุณุช ุทุงุฑุฆุฉ

---

### 4.3 CLASS_DELETED - ุญุฐู ุงูููุงุณ

| Property | Value |
|----------|-------|
| **Trigger** | ุญุฐู ููุงุณ ูู ุงููุธุงู |
| **Priority** | ๐ก Medium |

| Audience | Channel | Justification |
|----------|---------|---------------|
| **TEACHER** | ๐ฒ In-App | ููุนูู |
| **STAFF** | ๐ฒ In-App | ููุฃุฑุดูุฉ |
| **STUDENTS** | ๐ Push + ๐ฒ In-App | ูุฌุจ ุฃู ูุนุฑููุง |
| **PARENTS** | ๐ Push + ๐ฒ In-App | ูุฌุจ ุฃู ูุนุฑููุง |

**ููุงุฐุง Push ูููุณ WhatsAppุ** ุงูุญุฐู ุนุงุฏุฉ ุฅุฌุฑุงุก ุฅุฏุงุฑู ูููุณ ุทูุงุฑุฆ

---

### 4.4 CLASS_STATUS_CHANGED - ุชุบููุฑ ุญุงูุฉ ุงูููุงุณ โ๏ธ

| Property | Value |
|----------|-------|
| **Trigger** | ุชุบููุฑ ุญุงูุฉ ุงูููุงุณ (ACTIVE โ CANCELED/FINISHED) |

#### ุฅุฐุง ูุงูุช ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ = CANCELED (ุฅูุบุงุก) ๐ด

| Audience | Channel | Justification |
|----------|---------|---------------|
| **STUDENTS** | ๐ฌ **WhatsApp** + ๐ Push + ๐ฒ In-App | **ุฃูุงู - ููุน ุงูุฐูุงุจ ูููุงู ููููู** |
| **PARENTS** | ๐ฌ **WhatsApp** + ๐ Push + ๐ฒ In-App | **ุฃูุงู ุงูุฃุทูุงู** |
| **TEACHER** | ๐ Push + ๐ฒ In-App | ูุนุฑู |
| **STAFF** | ๐ Push + ๐ฒ In-App | ููุนูู |

#### ุฅุฐุง ูุงูุช ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ = FINISHED (ุงูุชูุงุก) ๐ข

| Audience | Channel |
|----------|---------|
| All | ๐ฒ In-App ููุท |

**ููุงุฐุงุ** ุงูุงูุชูุงุก ูุชููุน ูููุณ ุทูุงุฑุฆ

---

### 4.5 STAFF_ASSIGNED_TO_CLASS - ุชุนููู ููุธู ุนูู ููุงุณ

| Property | Value |
|----------|-------|
| **Trigger** | ุฅุถุงูุฉ ููุธู ููุนูู ุนูู ููุงุณ ูุนูู |

| Audience | Channel | Justification |
|----------|---------|---------------|
| **TARGET** (ุงูููุธู) | ๐ Push + ๐ฒ In-App | ูุนุฑู ูููุชู ุงูุฌุฏูุฏุฉ |

---

### 4.6 STAFF_REMOVED_FROM_CLASS - ุฅุฒุงูุฉ ููุธู ูู ููุงุณ

| Property | Value |
|----------|-------|
| **Trigger** | ุฅุฒุงูุฉ ููุธู ูู ุงูุนูู ุนูู ููุงุณ |

| Audience | Channel |
|----------|---------|
| **TARGET** (ุงูููุธู) | ๐ Push + ๐ฒ In-App |

---

## 5. ุฅุดุนุงุฑุงุช ุงููุฌููุนุงุช | Group Notifications

### 5.1 GROUP_CREATED - ุฅูุดุงุก ูุฌููุนุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุฅูุดุงุก ูุฌููุนุฉ ุฌุฏูุฏุฉ ูู ููุงุณ |
| **Priority** | ๐ข Low |

| Audience | Channel |
|----------|---------|
| **TEACHER** | ๐ฒ In-App |
| **STAFF** | ๐ฒ In-App |

---

### 5.2 GROUP_UPDATED - ุชุญุฏูุซ ุงููุฌููุนุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุชุบููุฑ ุจูุงูุงุช ุงููุฌููุนุฉ |

#### ุฅุฐุง ุชุบูุฑ ุงูุฌุฏูู (Schedule) ๐

| Audience | Channel | Justification |
|----------|---------|---------------|
| **TEACHER** | ๐ Push + ๐ฒ In-App | ุงูููุนุฏ ูููู |
| **STUDENTS** | ๐ Push + ๐ฒ In-App | ุงูููุนุฏ ููููู |
| **PARENTS** | ๐ Push + ๐ฒ In-App | ุงูุชูุตูู |
| **STAFF** | ๐ฒ In-App | ููุฃุฑุดูุฉ |

#### ุชุบููุฑุงุช ุฃุฎุฑู (ุงุณู/ูุตู)

| Audience | Channel |
|----------|---------|
| All | ๐ฒ In-App ููุท |

---

### 5.3 GROUP_DELETED - ุญุฐู ุงููุฌููุนุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุญุฐู ูุฌููุนุฉ ูู ุงููุธุงู |

| Audience | Channel |
|----------|---------|
| **TEACHER** | ๐ฒ In-App |
| **STAFF** | ๐ฒ In-App |
| **STUDENTS** | ๐ Push + ๐ฒ In-App |
| **PARENTS** | ๐ Push + ๐ฒ In-App |

---

### 5.4 STUDENT_ADDED_TO_GROUP - ุชุณุฌูู ุทุงูุจ ูู ูุฌููุนุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุฅุถุงูุฉ ุทุงูุจ ููุฌููุนุฉ (ุชุณุฌูู/enrollment) |
| **Business Value** | ๐ ุชุฃููุฏ ุงูุชุณุฌูู |

| Audience | Channel | Justification |
|----------|---------|---------------|
| **TARGET** (ุงูุทุงูุจ) | ๐ Push + ๐ฒ In-App | ุชุฃููุฏ ุงูุชุณุฌูู |
| **PARENTS** | ๐ Push + ๐ฒ In-App | ุฅุนูุงู ููู ุงูุฃูุฑ |

**ููุงุฐุง Push ูููุณ WhatsAppุ** ูุชุฌูุจ ุงูุชูููุฉ ุงูุนุงููุฉ ูู ุงูุชุณุฌูู ุงูุฌูุงุนู

---

### 5.5 STUDENT_REMOVED_FROM_GROUP - ุฅุฒุงูุฉ ุทุงูุจ ูู ูุฌููุนุฉ

| Property | Value |
|----------|-------|
| **Trigger** | ุฅุฒุงูุฉ ุทุงูุจ ูู ูุฌููุนุฉ |

| Audience | Channel |
|----------|---------|
| **TARGET** (ุงูุทุงูุจ) | ๐ Push + ๐ฒ In-App |
| **PARENTS** | ๐ Push + ๐ฒ In-App |

---

## 6. ุฅุดุนุงุฑุงุช ุงููุฑุงูุฒ ูุงููุฑูุน | Centers & Branches Notifications

### 6.1 CENTER_DELETED - ุญุฐู ุงููุฑูุฒ

| Property | Value |
|----------|-------|
| **Trigger** | ุญุฐู ูุฑูุฒ (soft-delete) |
| **Audience** | OWNERS (ุฃุตุญุงุจ ุงููุฑูุฒ) |
| **Channel** | ๐ฒ In-App only |
| **Priority** | ๐ข Low |
| **Business Justification** | ุฅุฌุฑุงุก ุฅุฏุงุฑู - ููุฃุฑุดูุฉ |

---

### 6.2 CENTER_RESTORED - ุงุณุชุนุงุฏุฉ ุงููุฑูุฒ

| Property | Value |
|----------|-------|
| **Trigger** | ุงุณุชุนุงุฏุฉ ูุฑูุฒ ูุญุฐูู |
| **Audience** | OWNERS |
| **Channel** | ๐ฒ In-App only |
| **Priority** | ๐ข Low |

---

### 6.3 BRANCH_CREATED / BRANCH_UPDATED / BRANCH_RESTORED

| Property | Value |
|----------|-------|
| **Trigger** | ุฅูุดุงุก/ุชุญุฏูุซ/ุงุณุชุนุงุฏุฉ ูุฑุน |
| **Audience** | OWNERS, STAFF (ุฐูู ุตูุงุญูุฉ ุงููุฑุน) |
| **Channel** | ๐ฒ In-App only |

---

### 6.4 BRANCH_DELETED - ุญุฐู ุงููุฑุน

| Property | Value |
|----------|-------|
| **Trigger** | ุญุฐู ูุฑุน |
| **Audience** | OWNERS, STAFF |
| **Channel** | ๐ Push + ๐ฒ In-App |
| **Business Justification** | ุฃูุซุฑ ุชุฃุซูุฑุงู - ูุฌุจ ุฅุนูุงู ุฐูู ุงูุตูุงุญูุฉ |

---

## 7. ุฅุดุนุงุฑุงุช ุงูุญุถูุฑ | Attendance Notifications

### 7.1 STUDENT_ABSENT - ุบูุงุจ ุงูุทุงูุจ

| Property | Value |
|----------|-------|
| **Trigger** | ุชุณุฌูู ุบูุงุจ ุงูุทุงูุจ ุนู ุงูุญุตุฉ (mark / mark-all-absent) |
| **Audience** | TARGET (ุงูุทุงูุจ), PARENTS (ููู ุงูุฃูุฑ - TODO) |
| **Channel** | ๐ Push + ๐ฒ In-App |
| **Priority** | ๐ก Medium |
| **Business Justification** | "ุนูุฏูุง ุงูุทุงูุจ ูุง ูุญุถุฑ ููู ุงูุฃูุฑ ููุจูููุบ" |

**ููุงุญุธุฉ:** PARENTS ูุนุชูุฏ ุนูู ุนูุงูุฉ ููู ุงูุฃูุฑโุงูุทุงูุจ (ููุฏ ุงูุชูููุฐ).

---

## 8. ุฅุดุนุงุฑุงุช ุงูููุชุฑุฉ ูุงููุฏููุนุงุช | Student Billing & Teacher Payout Notifications

**ููุฌ:** ูุณุงุฑ ุญุฑุฌ ููุทุ ุฌูููุฑ TARGET ููุท (ุทุงูุจ / ูุฏุฑุณ). ูุง PARENTS. ูุง ุฅุดุนุงุฑ ูู CHARGE_CREATED (ุชุฌูุจ ุงูุชูุฑุงุฑ ุนูุฏ ุงูุฅูุดุงุก ูุงูุฏูุน ูู ููุณ ุงูุชุฏูู). PAYOUT_STATUS_UPDATED ููุชุฌุงููุ ููุณุชุฎุฏู PAYOUT_PAID ููุท.

### 8.1 Student Billing (TARGET = ุงูุทุงูุจ)

| Event | Trigger | Channel | ููุงุญุธุงุช |
|-------|---------|---------|---------|
| **CHARGE_COMPLETED** | ุงูุชูุงู ุฏูุน ุฑุณูู (ุฏูุนุฉ ูุงููุฉ) | ๐ Push + ๐ฒ In-App | ุงูุทุงูุจ ููุนูู ุจุฃู ุงูุฑุณูู ููุณุชููุฉ ุจุงููุงูู |
| **CHARGE_INSTALLMENT_PAID** | ุงุณุชูุงู ุฏูุนุฉ ูู ุฃูุณุงุท | ๐ฒ In-App ููุท | ุชูููู Spamุ ุงูุทุงูุจ ูุฑู ุงูุชูุฏู |
| **CHARGE_REFUNDED** | ุงุณุชุฑุฏุงุฏ ุฑุณูู | ๐ Push + ๐ฒ In-App | **ูุชุถูู refundReason** ูุชูููู ุงุณุชูุณุงุฑุงุช ุงููุฑูุฒ |

**CHARGE_CREATED:** ูุง ุฅุดุนุงุฑ ููุง Listener (ุบุงูุจุงู ููุฏูุน ูุจุงุดุฑุฉ โ ุชุฌูุจ ุฅุดุนุงุฑ ูุฒุฏูุฌ).

### 8.2 Teacher Payout (TARGET = ุงููุฏุฑุณ)

| Event | Trigger | Channel | ููุงุญุธุงุช |
|-------|---------|---------|---------|
| **PAYOUT_CREATED** | ุฅูุดุงุก ุณุฌู ุงุณุชุญูุงู | ๐ฒ In-App ููุท | ุชุดุบูููุ ุงููุฏุฑุณ ูุฑู ุงูุณุฌู |
| **PAYOUT_PAID** | ุตุฑู ุงูุงุณุชุญูุงู ุจุงููุงูู | ๐ Push + ๐ฒ In-App | ุงููุฏุฑุณ ููุนูู ุจุงูุตุฑู |
| **PAYOUT_INSTALLMENT_PAID** | ุงุณุชูุงู ุฏูุนุฉ ูู ุฃูุณุงุท ุงูุงุณุชุญูุงู | ๐ฒ In-App ููุท | ุชูููู Spam |

**PAYOUT_STATUS_UPDATED:** ููุชุฌุงููุ ุงูุงูุชูุงุก ุจู PAYOUT_PAID.

### 8.3 ููุงุนุฏ ุชูููุฉ

- **ุชุตุฏูุฑ ุงูู Repositories:** `StudentChargesRepository` ู `TeacherPayoutRecordsRepository` ููุตุฏููุฑุงู ูู ููุฏูููุงุชูู ูุงุณุชุฎุฏุงููุง ูู ุงูู Resolvers.
- **refundReason:** ุฅูุฒุงูู ูู ูุงูุจ CHARGE_REFUNDEDุ ูููุฑููุฑ ูู ุงูู Event/Intent.

---

## 9. ุฅุดุนุงุฑุงุช ุงููุตุฑููุงุช ูุงูููู ุงูุดุฎุตู | Expenses & User Profile Notifications

### 9.1 Expenses (OWNERS + STAFF โ ูุฑุน)

| Event | Trigger | Channel | ููุงุญุธุงุช |
|-------|---------|---------|---------|
| **EXPENSE_CREATED** | ุฅูุดุงุก ูุตุฑูู ูุฏูุนู | ๐ฒ In-App ููุท | ุชุดุบูููุ ูุงู ุฎุงุฑุฌ. OWNERS + STAFF (ุงููุฑุน) |
| **EXPENSE_REFUNDED** | ุงุณุชุฑุฏุงุฏ ูุตุฑูู | ๐ Push + ๐ฒ In-App | ูุงู ููุณุชุฑุฏุ ูุถูุญ ุฃุนูู |

**EXPENSE_UPDATED:** ููุชุฌุงูู (ุชุนุฏูู ุนููุงู/ูุตู/ูุฆุฉ ููุท โ In-App ููุทุ ููุญุฐู ูุชูููู ุงูุถูุถุงุก).

- **Intent:** `expenseId`, `centerId`, `branchId`, `actorId`. Resolver ูุชุจุน ููุณ ููุท ุงููุฑุน (OWNERS + STAFF). ุงุณุชุจุนุงุฏ ุงููุงุนู.

### 9.2 User Profile lifecycle (TARGET ููุท)

ุงูุฅุดุนุงุฑุงุช ุฎุงุตุฉ ุจุฏูุฑุฉ ุญูุงุฉ **ุงูููู ุงูุดุฎุตู** (User Profile) ูููุณ ุญุณุงุจ ุงููุณุชุฎุฏู. ุงูุฃุญุฏุงุซ ุชูุตุฏุฑ ูู `UserProfileService` (ุชูุนููุ ุฅููุงูุ ุญุฐูุ ุงุณุชุนุงุฏุฉุ ุฅูุดุงุก).

| Event | Trigger | Channel | ููุงุญุธุงุช |
|-------|---------|---------|---------|
| **USER_PROFILE_ACTIVATED** | ุชูุนูู ููู ุดุฎุตู | ๐ Push + ๐ฒ In-App | "ุชู ุชูุนูู ูููู ุงูุดุฎุตู ุจูุงุณุทุฉ {actorName}" |
| **USER_PROFILE_DEACTIVATED** | ุฅููุงู ููู ุดุฎุตู | ๐ Push + ๐ฒ In-App | "ุชู ุฅููุงู ูููู ุงูุดุฎุตู ุจูุงุณุทุฉ {actorName}" |
| **USER_PROFILE_DELETED** | ุญุฐู ููู ุดุฎุตู (soft-delete) | ๐ Push + ๐ฒ In-App | "ุชู ุญุฐู ูููู ุงูุดุฎุตู ุจูุงุณุทุฉ {actorName}" |
| **USER_PROFILE_RESTORED** | ุงุณุชุนุงุฏุฉ ููู ุดุฎุตู | ๐ Push + ๐ฒ In-App | "ุชู ุงุณุชุนุงุฏุฉ ูููู ุงูุดุฎุตู ุจูุงุณุทุฉ {actorName}" |
| **USER_PROFILE_CREATED** | ุฅูุดุงุก ููู ุดุฎุตู | ๐ฒ In-App ููุท | ุชูููู ุชูุฑุงุฑ ูุน ุฅุดุนุงุฑุงุช ุงูู Access Controlุ `actorName`, `profileType`, `centerName` |

- **USER_UPDATED / USER_ACTIVATED (ูุณุชูู User):** ูุง ุฅุดุนุงุฑ. ุงูุฅุดุนุงุฑุงุช ููุท ูุนูููุงุช ุงูููู ุงูุดุฎุตู.
- **Actor exclusion:** ุฅู ูุงู ุงููุงุนู ูู ููุณู ุตุงุญุจ ุงูููู ุงููุณุชูุฏูุ ูุง ููุฑุณู ุฅุดุนุงุฑ.
- **Intent:** `userProfileId`, `actorId`ุ CREATED ููุถุงู ูู `profileType`, `centerId` ุงุฎุชูุงุฑู.

---

## ููุฎุต ุงุณุชุฎุฏุงู WhatsApp | WhatsApp Usage Summary

> **WhatsApp ููููู ูููุณุชุฎุฏู ููุท ูู ุงูุญุงูุงุช ุงูุชุงููุฉ:**

| Event | Audience | Justification |
|-------|----------|---------------|
| `CENTER_ACCESS_GRANTED` | TARGET (ููุธู ุฌุฏูุฏ) | ุฑุณุงูุฉ ุชุฑุญูุจ ุงุญุชุฑุงููุฉ |
| `CENTER_ACCESS_REVOKED` | TARGET | ุฅุนูุงู ููุฑู ุจุฅููุงุก ุงูุฎุฏูุฉ |
| `CENTER_ACCESS_ACTIVATED` | TARGET | ุชุฑุญูุจ ุจุงูุนูุฏุฉ |
| `CENTER_ACCESS_DEACTIVATED` | TARGET | ุฅุนูุงู ุจุงูุฅููุงู |
| `SESSION_CANCELED` | STUDENTS, PARENTS, TEACHER | โ๏ธ **ุฃูุงู - ููุน ุงููุดุงููุฑ ุงููุงุฑุบุฉ** |
| `SESSION_UPDATED` | STUDENTS, PARENTS | ุชุบููุฑ ุงูููุนุฏ ููู |
| `CLASS_STATUS_CHANGED` (CANCELED) | STUDENTS, PARENTS | โ๏ธ **ุฃูุงู** |

### ุฅุฌูุงูู WhatsApp ุงููุชููุน:
- **ุชูุธูู/ูุตู**: ~5-10 ุฑุณุงุฆู/ุดูุฑ ููู ูุฑูุฒ
- **ุฅูุบุงุก ุญุตุต/ููุงุณุงุช**: ูุนุชูุฏ ุนูู ุนุฏุฏ ุงูุฅูุบุงุกุงุช (ูุงุฏุฑ)
- **ุชุบููุฑ ููุงุนูุฏ**: ูุนุชูุฏ ุนูู ุงูุชุบููุฑุงุช

---

## ููุงุนุฏ ููุน Spam | Anti-Spam Rules

1. **Rate Limiting**: ุฅุดุนุงุฑ ูุงุญุฏ ููุดู ุงูุฏุฎูู ูู 15 ุฏูููุฉ
2. **Trust Period**: ูุง ุฅุดุนุงุฑ ูุฌูุงุฒ ูุนุฑูู ุฎูุงู 30 ููู
3. **Actor Exclusion**: ูุง ุฅุดุนุงุฑ ููุดุฎุต ุงูุฐู ูุงู ุจุงูุนูููุฉ
4. **Creator Exclusion**: ูุง ุฅุดุนุงุฑ Push/WhatsApp ููู ุฃูุดุฃ ุงูููุงุณ/ุงููุฌููุนุฉ
5. **FINISHED โ Emergency**: ุญุงูุฉ "ููุชูู" = In-App ููุท
6. **Bulk Operations**: ูุง WhatsApp ูู ุงูุชุณุฌูู ุงูุฌูุงุนู

---

## ูููุฑุงุฌุนุฉ ูู ูุณู ุงูุฃุนูุงู | For Business Review

### ุฃุณุฆูุฉ ููุชุฃููุฏ:

1. โ ูู ุงููููุงุช ุงููุฎุชุงุฑุฉ ููุงุณุจุฉ ููู ุญุฏุซุ
2. โ ูู ููุงู ุฃุญุฏุงุซ ูุงูุตุฉ ูุฌุจ ุฅุถุงูุชูุงุ
3. โ ูู ูุญุชูู ุงูุฑุณุงุฆู ูุงุถุญ ููููููุ
4. โ ูู ูุญุชุงุฌ WhatsApp ูู ููุงูู ุฅุถุงููุฉุ
5. โ ูู ูุญุชุงุฌ ุชูููู ุงูุฅุดุนุงุฑุงุช ูู ููุงูู ูุนููุฉุ

### ููุงุญุธุงุช ุฅุถุงููุฉ:

- ุฌููุน ุงูุฑุณุงุฆู ูุชููุฑุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ูููู ุชุนุฏูู ุงูููุงูุจ ุจุณูููุฉ
- ูููู ุฅุถุงูุฉ ูููุงุช ุฌุฏูุฏุฉ (Email) ูุงุญูุงู

---

**ุขุฎุฑ ุชุญุฏูุซ:** January 2026  
**ุงููุณุคูู:** Development Team
